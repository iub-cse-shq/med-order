
<%include header%>

<div id="view">
  <div class="panel panel-success">
      <div class="panel-heading"><center>ADD PRODUCT FORM<center></div>
      <div class="panel-body">
        <table class="table table-hover">
        <thead>
        <tr>
          <th></th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>Category Name</td>
          <td><label><input type="text" class="form-control" id="category"></label></td>
        </tr>
        <tr>
          <td>Product Name</td>
          <td><label><input type="text" class="form-control" id="name"></label></td>
        </tr>
        <tr>
          <td>Product Price</td>
          <td><label><input type="text" class="form-control" id="price"></label></td>
        </tr>
        <tr>
          <td>Product Status</td>
            <td><label><input type="text" class="form-control" id="quantity"></label></td>
          </div></td>
        </tr>
        <tr>
          <td></td>
          <td><button type="button" id="save_product" class="btn btn-success">SAVE</button></td>
        </tr>
      </tbody>
    </table>
      </div>
  </div>
</div>
<%include footer%>


<script src="/lib/jquery/dist/jquery.min.js"></script>
<script src="/vendor/ejs_production.js"></script>
<script>
var product = {
    product_name: "",
    product_category:"",
    product_id: null,
    product_quantity: null
  };
  $('#category').change(function(){
    product.product_category = $('#category').val();
  });
  $('#name').change(function(){
    product.product_name = $('#name').val();
  });
  $('#price').change(function(){
    product.product_id = $('#price').val();
  });
  $('#quantity').change(function(){
    product.product_quantity = $('#quantity').val();
  });
  $('#save_product').click(function(){
    $.ajax({
      method:"POST",
      url:'/api/products',
      data: product
    }).done(function(response){
      $('#category').val('');
      $('#name').val('');
      $('#quantity').val('');
      $('#price').val('');
      alert("The Product has been added");
      console.log("Product has been added");
      window.location.replace("/add_product");
    }).fail(function(response){
      $("#error").text(JSON.parse(response.responseText).message);
        console.log(JSON.parse(response.responseText).message);
    });
  });
  </script>
</html>
